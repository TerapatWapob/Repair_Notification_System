<div class="container mt-5">
    <div class="header-bg text-center mb-4">
        <h2>เพิ่มข้อมูลแจ้งซ่อม</h2>
    </div>
    <form method="post" asp-action="Repair" asp-controller="Home">
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="subject" class="form-label">เรื่อง</label>
                <input type="text" class="form-control" id="subject" name="subject" placeholder="กรุณากรอกเรื่อง" required>
            </div>
            <div class="col-md-6">
                <label for="department" class="form-label">สังกัดหน่วยงาน</label>
                <select class="form-control" id="department" name="department" required>
                    <option value="" disabled selected>กรุณาเลือกสังกัดหน่วยงาน</option>
                    @foreach (var agency in ViewBag.Agencies as SelectListItem[])
                    {
                        <option value="@agency.Value">@agency.Text</option>
                    }
                </select>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="email" class="form-label">อีเมล</label>
                <input type="email" class="form-control" id="email" name="email" placeholder="กรุณากรอกอีเมล" required>
            </div>
            <div class="col-md-6">
                <label for="problemType" class="form-label">ประเภทของปัญหา</label>
                <select class="form-control" id="problemType" name="problemType" required>
                    <option value="" disabled selected>กรุณาเลือกประเภทของปัญหา</option>
                    <option value="hardware">ปัญหาเกี่ยวกับฮาร์ดแวร์/อุปกรณ์ต่างๆ</option>
                    <option value="software">ปัญหาเกี่ยวกับซอฟต์แวร์/โปรแกรมต่างๆ</option>
                    <option value="network">ปัญหาด้านเครือข่าย</option>
                    <option value="other">อื่นๆ</option>
                </select>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="phoneNumber" class="form-label">เบอร์โทรศัพท์</label>
                <input type="text" class="form-control" id="phoneNumber" name="phoneNumber" placeholder="กรุณากรอกเบอร์โทรศัพท์" required>
            </div>
        </div>
        <div class="mb-3">
            <label for="problemDescription" class="form-label">ปัญหาที่พบ</label>
            <textarea class="form-control" id="problemDescription" name="problemDescription" rows="4" placeholder="กรุณากรอกปัญหาที่พบ" required></textarea>
        </div>
        <div style="display: flex; justify-content: flex-end;">
            <button type="submit" class="btn btn-primary ms-auto">ส่งข้อมูล</button>
        </div>
    </form>
</div>

<script>
    function restrictToNumbers(event) {
        // Allow only numeric values
        input.value = input.value.replace(/[^0-9+]/g, '').slice(0, 14);
    }
</script>

<script>
    document.querySelector('form').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent form default behavior
        alert('ข้อมูลของคุณถูกส่งเรียบร้อยแล้ว!'); // Display success message
        window.location.href = '@Url.Action("Index", "Home")'; // Redirect to the home page
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
