@{
    Layout = "_StaffLayout"; // Specify a custom layout
}

<style>
.header {
    background-color: #007BFF; /* Blue background */
    color: white;
    text-align: center;
    padding: 10px 15px; /* Adjust padding for consistency */
    border-radius: 10px 10px 0 0;
    text-shadow: -1px -1px 0 black, 1px -1px 0 black, -1px 1px 0 black, 1px 1px 0 black; /* Black stroke */
    font-size: 1.5rem; /* Larger font size for header */
    width: 100%;
    box-sizing: border-box; /* Ensures padding doesn't add extra width */
}

.subheader {
    background-color: #f0f8ff; /* Light blue background */
    padding: 10px 15px; /* Adjust padding for consistency */
    font-weight: bold;
    font-size: 1rem; /* Smaller font size than header */
    width: 100%; /* Make sure it's the same width as header */
    box-sizing: border-box; /* Ensures padding doesn't add extra width */
    display: flex;
    justify-content: space-between; /* Spread columns evenly */
    align-items: center; /* Vertically center text */
}

.content {
    background-color: white;
    padding: 10px 30px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    width: 100%; /* Ensures content width matches header */
}

.content .row {
    padding: px 0; /* Increase top and bottom padding */
    align-items: center; /* Keep content vertically centered */
}

.content .col {
  border: 0px solid #ddd; /* Add a light border to columns for clarity */
  padding: 10px;
  text-align: center;
    }

</style>

<br><br>

@{
    int index = 1;  
    var today = DateTime.Today;
}
<div class="container mt-5">
    <div class="header">
        <h2>รายการที่ดำเนินการเรียบร้อยแล้ว</h2>
    </div>
    <div class="subheader text-center">
        <div class="col-1">รายการที่</div>
        <div class="col">เรื่อง</div>
        <div class="col-3">ประเภทของปัญหา</div>
        <div class="col-3">สถานะ</div>
        <div class="col-2"></div>
        <div class="col-1"></div>
    </div>

    <div class="content">
        @foreach (var ticket in Model)
        {
            if (ticket.EndDate != null && (today - ticket.EndDate).Days <= 365)
            {
                <div class="row text-center">
                    <div class="col-1">@index</div>
                    <div class="col">@ticket.Topic</div>
                    <div class="col-3">@ticket.TypeOfProblem</div>
                    <div class="col-3">@ticket.State</div>
                    <div class="col-2">
                        <a href="@Url.Action("FinishTicketDetail", "Staff", new { id = ticket.ID })" class="btn btn-info">รายละเอียด</a>
                    </div>
                    <div class="col-1">
                    <form method="post" asp-action="DeleteFinishTicket" asp-controller="Staff">
                        <input type="hidden" name="id" value="@ticket.ID" />
                        <button type="submit" class="btn btn-danger" onclick="return confirm('คุณต้องการลบข้อมูลนี้หรือไม่?\nโปรดทราบว่าการกระทำนี้ไม่สามารถย้อนกลับได้');">
                            ลบ
                        </button>
                    </form>
                </div>
                </div>
                index++;
            }
        }
    </div>
</div>
